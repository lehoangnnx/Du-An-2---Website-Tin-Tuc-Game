function gamereivews(t){clearTimeout(timeout),timeout=setTimeout(function(){var e=$("#gameId").val(),n=$("meta[name='_csrf']").attr("content"),a=$("meta[name='_csrf_header']").attr("content");$(document).ajaxSend(function(t,e){e.setRequestHeader(a,n)}),$.ajax({type:"POST",url:contextPath+"/saveorupdategamereviews",data:{gameId:e,starreview:t},success:function(){},error:function(){}})},100)}function checkcontent(t){var e=$("#content"+t).val().trim();""!=e?($("#btn-replycomment"+t).removeAttr("disabled"),$("#btn-updatecomment"+t).removeAttr("disabled")):($("#btn-replycomment"+t).attr("disabled","disabled"),$("#btn-updatecomment"+t).attr("disabled","disabled"))}function replysubcomment(t,e,n,a,o,c){return $("#showreplycomment"+n).html('<a href="javascript:void(0)" class="image-avatar"> <img src="'+e+'" data-ot-retina="'+e+'" alt="" title="">\n </a>\n <div class="comment-text" style="width: auto; overflow: hidden;">\n <strong class="user-nick"><a href="javascript:void(0)">'+t+'</a> <span id="msgsubcomment'+n+'"></span></strong>\n<textarea onkeydown="checkcontent('+n+');" onkeyup="checkcontent('+n+');" onkeypress="checkcontent('+n+');" id="content'+n+'" name="content" placeholder="Viết bình luận của bạn.." style="width: 100%; height: 100px;"></textarea>\n <p class="form-submit">\n <input id="btn-replycomment'+n+'" disabled name="submit" type="submit" onclick="postreplycomment('+n+","+a+","+o+');" class="submit button" value="Trả Lời">\n <input onclick="cancelsubcomment('+n+');"  name="submit" type="submit"  class="submit button pull-right" value="Hủy">\n </p>\n </div>\n'),$("#msgsubcomment"+n).text("Bạn Đang Trả Lời "+c),$("#usersBySubUserId").val(o),$("#subCommentId").val(a),!1}function showUpdateComment(t,e,n){$("#showreplycomment"+n).html('<a href="javascript:void(0)" class="image-avatar"> <img src="'+e+'" data-ot-retina="'+e+'" alt="" title="">\n </a>\n <div class="comment-text" style="width: auto; overflow: hidden;">\n <strong class="user-nick"><a href="javascript:void(0)">'+t+'</a> <span id="msgsubcomment'+n+'"></span></strong>\n<textarea onkeydown="checkcontent('+n+');" onkeyup="checkcontent('+n+');" onkeypress="checkcontent('+n+');" id="content'+n+'" name="content" placeholder="Viết bình luận của bạn.." style="width: 100%; height: 100px;"></textarea>\n <p class="form-submit">\n <input id="btn-updatecomment'+n+'" disabled name="submit" type="submit" onclick="postupdatecomment('+n+');" class="submit button" value="Sửa">\n <input onclick="cancelsubcomment('+n+');"  name="submit" type="submit"  class="submit button pull-right" value="Hủy">\n </p>\n </div>\n'),$("#msgsubcomment"+n).text("Bạn Đang Sửa Bình Luận");var a=$("#spanContent"+n).text();return $("#content"+n).val(a),!1}function cancelsubcomment(t){$("#showreplycomment"+t).empty()}function postupdatecomment(t){clearTimeout(timeout),timeout=setTimeout(function(){var e=$("#content"+t).val(),n=$("meta[name='_csrf']").attr("content"),a=$("meta[name='_csrf_header']").attr("content");$(document).ajaxSend(function(t,e){e.setRequestHeader(a,n)}),$.ajax({type:"POST",url:contextPath+"/updatecomment",data:{commentId:t,content:e},success:function(){$("#spanContent"+t).text(e),$("#showreplycomment"+t).empty()},error:function(){}})},100)}function postreplycomment(t,e,n){clearTimeout(timeout),timeout=setTimeout(function(){var a=$("#articleId").val(),o=$("#content"+t).val(),c=$("meta[name='_csrf']").attr("content"),m=$("meta[name='_csrf_header']").attr("content");$(document).ajaxSend(function(t,e){e.setRequestHeader(m,c)}),$.ajax({type:"POST",url:contextPath+"/replycomment",data:{subCommentId:e,articleId:a,content:o,usersBySubUserId:n},success:function(n){for(var a="",o=0;o<Object.keys(n.commentchild).length;o++)if(0!==n.commentchild[o].subCommentId&&n.commentchild[o].subCommentId===e){var c="";n.userIdLogin!=n.commentchild[o].usersByUserId&&(c=' <span class="item-meta"> <a href="javascript:void(0)"><i\n      class="fa fa-thumbs-o-up"></i> Thích</a>\n       <a class="replycomment"\n       onclick="replysubcomment(\''+n.userName+"' ,'"+n.avatar+"' ,"+n.commentchild[o].commentId+","+e+","+n.commentchild[o].usersByUserId+",'"+n.commentchild[o].usersByUserUserName+'\' );"\n        href="javascript:void(0)"><i\n       class="fa fa-comment-o"\n      style="margin-left: 25px;"></i> \nBình luận</a>\n</span> \n');var m="";1!=n.roleEditComment&&n.userIdLogin!=n.commentchild[o].usersByUserId||(m='<div class="dropdown time-stamp pull-right right">\n   <button onclick="myFunction('+n.commentchild[o].commentId+')" class="dropbtn fa fa-ellipsis-h" style="color: #0b0b0b"></button>\n  <div id="myDropdown'+n.commentchild[o].commentId+'" class="dropdown-content">\n  <a onclick="showModelDeleteComment('+n.commentchild[o].commentId+');" href="javascript:void(0)" data-toggle="modal" data-target="#myModal" >Xóa</a>\n   <a onclick="showUpdateComment(\''+n.userName+"' ,'"+n.avatar+"' ,"+n.commentchild[o].commentId+","+e+","+n.commentchild[o].usersByUserId+",'"+n.commentchild[o].usersByUserUserName+'\' );" href="javascript:void(0)">Sửa</a>\n   </div>\n  </div>'),a+='<ul style="background-color: aliceblue;" class="children">\n   <li class="comment">\n    <div class="comment-block">\n    <a href="javascript:void(0)" class="image-avatar"> <img\n    src="'+n.commentchild[o].usersByUserAvatar+'"\n    data-ot-retina="'+n.commentchild[o].usersByUserAvatar+'"\n     alt=""\n     title="">\n     </a>\n     <div class="comment-text">\n     <strong\n     class="user-nick">'+m+'<a href="javascript:void(0)">'+n.commentchild[o].usersByUserUserName+'</a>\n<span style="margin-top: 5px;" class="time-stamp ">'+n.commentchild[o].modifiedDate+'</span>\n</strong>\n        <div class="shortcode-content">\n         <p style="color: #ABABAB">\n        <a style="color: #0c91e5;"\n      href="">@'+n.commentchild[o].usersBySubUserUserName+'</a>\n     <span id="spanContent'+n.commentchild[o].commentId+'">'+n.commentchild[o].content+" </span> </p>\n         </div>\n"+c+' </div>\n<div class="comment-text">\n   <div id="showreplycomment'+n.commentchild[o].commentId+'" class="comment-block" style=" margin:0px; margin-top:25px; ">\n   </div>\n</div>\n </div>\n  </li>\n    </ul>\n'}$("#childcomment"+e).html(a),$("#showreplycomment"+t).empty(),$("html, body").animate({scrollTop:$("#comment"+e).offset().top},500)},error:function(){}})},100)}function commentlike(t){clearTimeout(timeout),timeout=setTimeout(function(){var e=$("meta[name='_csrf']").attr("content"),n=$("meta[name='_csrf_header']").attr("content");$(document).ajaxSend(function(t,a){a.setRequestHeader(n,e)}),$.ajax({type:"POST",url:contextPath+"/commentlike",data:{commentId:t},success:function(e){$("#countcommentlike"+t).text(e.countcommentlike),1==e.status?$("#statuscommentlike"+t).text(" Bỏ Thích"):$("#statuscommentlike"+t).text(" Thích")},error:function(){}})},100)}function morecomment(){clearTimeout(timeout),timeout=setTimeout(function(){var t=$("#articleId").val();$("#morecomment").hide(),$("#LoadingGifSmall").show(),$.ajax({type:"GET",url:contextPath+"/getcomment?page="+page,data:{articleId:t},success:function(t){var e="";if(0!=t.userIdLogin){for(var n=0;n<Object.keys(t.commentparent).length;n++)if(0===t.commentparent[n].subCommentId){for(var a="",o=0;o<Object.keys(t.commentchild).length;o++)if(0!==t.commentchild[o].subCommentId&&t.commentchild[o].subCommentId===t.commentparent[n].commentId){var c="";if(t.userIdLogin!=t.commentchild[o].usersByUserId){var m="";m=1==t.commentchild[o].statusofusercommentlike?" Bỏ Thích":" Thích",c=' <span class="item-meta"> <a href="javascript:void(0);" onclick="commentlike('+t.commentchild[o].commentId+');"><span id="countcommentlike'+t.commentchild[o].commentId+'" style="margin:10px;">'+t.commentchild[o].countcommentlike+'</span><i\n    class="fa fa-thumbs-o-up"></i><span id="statuscommentlike'+t.commentchild[o].commentId+'" style="margin:5px;">'+m+'</span> </a>\n       <a class="replycomment"\n       onclick="replysubcomment(\''+t.userName+"' ,'"+t.avatar+"' ,"+t.commentchild[o].commentId+","+t.commentparent[n].commentId+","+t.commentchild[o].usersByUserId+",'"+t.commentchild[o].usersByUserUserName+'\' );"\n        href="javascript:void(0)"><i\n       class="fa fa-comment-o"\n      style="margin-left: 25px;"></i> \nBình luận</a>\n</span> \n'}var s="";1!=t.roleEditComment&&t.userIdLogin!=t.commentchild[o].usersByUserId||(s='<div class="dropdown time-stamp pull-right right">\n   <button onclick="myFunction('+t.commentchild[o].commentId+')" class="dropbtn fa fa-ellipsis-h" style="color: #0b0b0b"></button>\n  <div id="myDropdown'+t.commentchild[o].commentId+'" class="dropdown-content">\n  <a onclick="showModelDeleteComment('+t.commentchild[o].commentId+');" href="javascript:void(0)" data-toggle="modal" data-target="#myModal" >Xóa</a>\n   <a onclick="showUpdateComment(\''+t.userName+"' ,'"+t.avatar+"' ,"+t.commentchild[o].commentId+","+t.commentparent[n].commentId+","+t.commentchild[o].usersByUserId+",'"+t.commentchild[o].usersByUserUserName+'\' );" href="javascript:void(0)">Sửa</a>\n   </div>\n  </div>'),a+='<ul style="background-color: aliceblue;" class="children">\n   <li class="comment">\n    <div class="comment-block">\n    <a href="javascript:void(0)" class="image-avatar"> <img\n    src="'+t.commentchild[o].usersByUserAvatar+'"\n    data-ot-retina="'+t.commentchild[o].usersByUserAvatar+'"\n     alt=""\n     title="">\n     </a>\n     <div class="comment-text">\n     <strong\n     class="user-nick">'+s+'<a href="javascript:void(0)">'+t.commentchild[o].usersByUserUserName+'</a>\n<span style="margin-top: 5px;" class="time-stamp ">'+t.commentchild[o].modifiedDate+'</span>\n</strong>\n        <div class="shortcode-content">\n         <p style="color: #ABABAB">\n        <a style="color: #0c91e5;"\n      href="">@'+t.commentchild[o].usersBySubUserUserName+'</a>\n     <span id="spanContent'+t.commentchild[o].commentId+'">'+t.commentchild[o].content+" </span> </p>\n         </div>\n"+c+' </div>\n<div class="comment-text">\n   <div id="showreplycomment'+t.commentchild[o].commentId+'" class="comment-block" style=" margin:0px; margin-top:25px; ">\n   </div>\n</div>\n </div>\n  </li>\n    </ul>\n'}var i="";if(t.userIdLogin!=t.commentparent[n].usersByUserId){var m="";m=1==t.commentparent[n].statusofusercommentlike?" Bỏ Thích":" Thích",i=' <span class="item-meta"> <a href="javascript:void(0);" onclick="commentlike('+t.commentparent[n].commentId+');"><span id="countcommentlike'+t.commentparent[n].commentId+'" style="margin:10px;">'+t.commentparent[n].countcommentlike+'</span><i\n    class="fa fa-thumbs-o-up"></i><span id="statuscommentlike'+t.commentparent[n].commentId+'" style="margin:5px;">'+m+'</span> </a>\n    <a class="replycomment" href="javascript:void(0)"\n     onclick="replysubcomment(\''+t.userName+"' ,'"+t.avatar+"' ,"+t.commentparent[n].commentId+","+t.commentparent[n].commentId+","+t.commentparent[n].usersByUserId+",'"+t.commentparent[n].usersByUserUserName+'\');">\n     <i class="fa fa-comment-o" style="margin-left: 25px;"></i> Bình\nluận</a>\n</span>\n'}var r="";1!=t.roleEditComment&&t.userIdLogin!=t.commentparent[n].usersByUserId||(r='<div class="dropdown time-stamp pull-right right">\n   <button onclick="myFunction('+t.commentparent[n].commentId+')" class="dropbtn fa fa-ellipsis-h" style="color: #0b0b0b"></button>\n  <div id="myDropdown'+t.commentparent[n].commentId+'" class="dropdown-content">\n  <a onclick="showModelDeleteComment('+t.commentparent[n].commentId+');" href="javascript:void(0)"data-toggle="modal" data-target="#myModal" >Xóa</a>\n   <a onclick="showUpdateComment(\''+t.userName+"' ,'"+t.avatar+"' ,"+t.commentparent[n].commentId+","+t.commentparent[n].commentId+","+t.commentparent[n].usersByUserId+",'"+t.commentparent[n].usersByUserUserName+'\');" href="javascript:void(0)">Sửa</a>\n   </div>\n  </div>'),e+='  <li  class="comment">\n <div id="comment'+t.commentparent[n].commentId+'" class="comment-block">\n  <a href="javascript:void(0)" class="image-avatar"> <img\n  src=" '+t.commentparent[n].usersByUserAvatar+' " \n   data-ot-retina="'+t.commentparent[n].usersByUserAvatar+' "\n   alt=""\n   title="">\n    </a>\n   <div class="comment-text">\n    <strong\n      class="user-nick">'+r+'<a href="javascript:void(0)"> '+t.commentparent[n].usersByUserUserName+' </a><span style="margin-top: 5px;" class="time-stamp ">'+t.commentparent[n].modifiedDate+'</span></strong>\n       <div class="shortcode-content">\n     <p id="spanContent'+t.commentparent[n].commentId+'">'+t.commentparent[n].content+"</p>\n    </div>\n"+i+'   </div>\n<div class="comment-text">\n   <div id="showreplycomment'+t.commentparent[n].commentId+'" class="comment-block" style=" margin-top:25px; ">\n   </div>\n</div> \n  </div>\n<div id="childcomment'+t.commentparent[n].commentId+'" >\n'+a+"</div>\n   </li>\n"}}else for(var n=0;n<Object.keys(t.commentparent).length;n++)if(0===t.commentparent[n].subCommentId){for(var a="",o=0;o<Object.keys(t.commentchild).length;o++)0!==t.commentchild[o].subCommentId&&t.commentchild[o].subCommentId===t.commentparent[n].commentId&&(a+='<ul style="background-color: aliceblue;" class="children">\n   <li class="comment">\n    <div class="comment-block">\n    <a href="javascript:void(0)" class="image-avatar"> <img\n    src="'+t.commentchild[o].usersByUserAvatar+'"\n    data-ot-retina="'+t.commentchild[o].usersByUserAvatar+'"\n     alt=""\n     title="">\n     </a>\n     <div class="comment-text">\n     <span class="time-stamp right">'+t.commentchild[o].modifiedDate+'</span>\n     <strong\n     class="user-nick"><a\n      href="javascript:void(0)">'+t.commentchild[o].usersByUserUserName+'</a><span\n       class="user-label">Admin</span></strong>\n        <div class="shortcode-content">\n         <p style="color: #ABABAB">\n        <a style="color: #0c91e5;"\n      href="">@'+t.commentchild[o].usersBySubUserUserName+"</a>\n          "+t.commentchild[o].content+"</p>\n         </div>\n </div>\n </div>\n  </li>\n    </ul>\n");e+='  <li class="comment">\n <div class="comment-block">\n  <a href="javascript:void(0)" class="image-avatar"> <img\n  src="'+t.commentparent[n].usersByUserAvatar+' " \n   data-ot-retina="'+t.commentparent[n].usersByUserAvatar+' "\n   alt=""\n   title="">\n    </a>\n   <div class="comment-text">\n   <span class="time-stamp right">'+t.commentparent[n].modifiedDate+'</span> <strong\n      class="user-nick"><a\n      href="javascript:void(0)"> '+t.commentparent[n].usersByUserUserName+' </a></strong>\n       <div class="shortcode-content">\n      <p>'+t.commentparent[n].content+"</p>\n    </div>\n   </div>\n  </div>\n"+a+"   </li>\n"}$("#comments").append(e),page+=1,Object.keys(t.commentparent).length<10&&$(".xemthemcomment").hide(),$("#LoadingGifSmall").hide(),$("#morecomment").show()},error:function(){$("#LoadingGifSmall").hide(),$("#morecomment").show()}})},100)}function showModelDeleteComment(t){$("#btn-deleteComment").attr("onclick","deletecomment("+t+");")}function deletecomment(t){clearTimeout(timeout),timeout=setTimeout(function(){var e=($("#articleId").val(),$("meta[name='_csrf']").attr("content")),n=$("meta[name='_csrf_header']").attr("content");$(document).ajaxSend(function(t,a){a.setRequestHeader(n,e)}),$.ajax({type:"POST",url:contextPath+"/deletecomment",data:{commentId:t},success:function(){location.reload()},error:function(){}})},100)}function myFunction(t){document.getElementById("myDropdown"+t).classList.toggle("show")}function coutFacebook(){$.ajax({type:"GET",url:"https://graph.facebook.com/?fields=og_object{likes.summary(total_count).limit(0)},share&id="+window.location.href,success:function(t){$("#countsharefacebook").text(t.share.share_count),console.log(t.share.share_count)},error:function(){}})}function coutGoogle(){var t=window.location.href;$.ajax({type:"POST",url:"https://clients6.google.com/rpc",processData:!0,contentType:"application/json",data:JSON.stringify({method:"pos.plusones.get",id:t,params:{nolog:!0,id:t,source:"widget",userId:"@viewer",groupId:"@self"},jsonrpc:"2.0",key:"p",apiVersion:"v1"}),success:function(t){$("#countsharegoogle").text(t.result.metadata.globalCounts.count)}})}function coutTwitter(){$.ajax({type:"GET",url:"http://public.newsharecounts.com/count.json?url="+window.location.href,success:function(t){$("#countsharetwitter").text(t.count)},error:function(){}})}$("#likearticle").click(function(){function t(){var t=$("#articleId").val(),e=$("meta[name='_csrf']").attr("content"),n=$("meta[name='_csrf_header']").attr("content");$(document).ajaxSend(function(t,a){a.setRequestHeader(n,e)}),$.ajax({type:"POST",url:contextPath+"/likearticles",data:{articleId:t,status:status},success:function(t){var e=Number($("#numberUserArticleLike").text());1==t?($("#textlike").text("Bỏ Thích"),$("#msglikearticle").html('<b>Bạn</b> Và <span id="numberUserArticleLike"> '+e+" </span> người khác thích bài viết này")):($("#textlike").text("Thích"),$("#msglikearticle").html('<b id= "numberUserArticleLike" > '+e+"</b> người khác thích bài viết này"))},error:function(){}})}clearTimeout(timeout),timeout=setTimeout(function(){t()},100)}),$("#content").on("keyup keypress keydown",function(){var t=$("#content").val().trim();""!=t?$("#btn-newcomment").removeAttr("disabled"):$("#btn-newcomment").attr("disabled","disabled")}),$(".btn-postcomment").click(function(){clearTimeout(timeout),timeout=setTimeout(function(){var t=$("#articleId").val(),e=$("#content").val(),n=$("meta[name='_csrf']").attr("content"),a=$("meta[name='_csrf_header']").attr("content");$(document).ajaxSend(function(t,e){e.setRequestHeader(a,n)}),$.ajax({type:"POST",url:contextPath+"/newcomment",data:{articleId:t,content:e},success:function(t){$("#content").val("");var e="",n="";if(t.userIdLogin!=t.usersByUserId){var a="";a=1==t.statusofusercommentlike?" Bỏ Thích":" Thích",n=' <span class="item-meta"> <a href="javascript:void(0);" onclick="commentlike('+t.commentId+');"><span id="countcommentlike'+t.commentId+'" style="margin:10px;">'+t.countcommentlike+'</span><i\n    class="fa fa-thumbs-o-up"></i><span id="statuscommentlike'+t.commentId+'" style="margin:5px;">'+a+'</span> </a>\n    <a class="replycomment" href="javascript:void(0)"\n     onclick="replysubcomment(\''+t.userName+"' ,'"+t.avatar+"' ,"+t.commentId+","+t.commentId+","+t.usersByUserId+",'"+t.usersByUserUserName+'\');">\n     <i class="fa fa-comment-o" style="margin-left: 25px;"></i> Bình\nluận</a>\n</span>\n'}var o="";1!=t.roleEditComment&&t.userIdLogin!=t.usersByUserId||(o='<div class="dropdown time-stamp pull-right right">\n   <button onclick="myFunction('+t.commentId+')" class="dropbtn fa fa-ellipsis-h" style="color: #0b0b0b"></button>\n  <div id="myDropdown'+t.commentId+'" class="dropdown-content">\n  <a onclick="showModelDeleteComment('+t.commentId+');" href="javascript:void(0)"data-toggle="modal" data-target="#myModal" >Xóa</a>\n   <a onclick="showUpdateComment(\''+t.userName+"' ,'"+t.avatar+"' ,"+t.commentId+","+t.commentId+","+t.usersByUserId+",'"+t.usersByUserUserName+'\');" href="javascript:void(0)">Sửa</a>\n   </div>\n  </div>'),e+='  <li  class="comment">\n <div id="comment'+t.commentId+'" class="comment-block">\n  <a href="javascript:void(0)" class="image-avatar"> <img\n  src=" '+t.usersByUserAvatar+' " \n   data-ot-retina="'+t.usersByUserAvatar+' "\n   alt=""\n   title="">\n    </a>\n   <div class="comment-text">\n    <strong\n   class="user-nick">'+o+'<a href="javascript:void(0)"> '+t.usersByUserUserName+' </a><span style="margin-top: 5px;" class="time-stamp ">'+t.modifiedDate+'</span></strong>\n       <div class="shortcode-content">\n     <p id="spanContent'+t.commentId+'">'+t.content+"</p>\n    </div>\n"+n+'   </div>\n<div class="comment-text">\n   <div id="showreplycomment'+t.commentId+'" class="comment-block" style=" margin-top:25px; ">\n   </div>\n</div> \n  </div>\n<div id="childcomment'+t.commentId+'" >\n</div>\n   </li>\n',$("#comments").prepend(e),$("html, body").animate({scrollTop:$(".article-main-next-prev").offset().top},500)},error:function(){}})},100)});var page=0;$("#morecomment").click(function(){morecomment()}),$(document).ready(function(){morecomment()}),window.onclick=function(t){if(!t.target.matches(".dropbtn")){var e,n=document.getElementsByClassName("dropdown-content");for(e=0;e<n.length;e++){var a=n[e];a.classList.contains("show")&&a.classList.remove("show")}}},$(document).ready(function(){$("#sharefacebook").attr("href","https://www.facebook.com/sharer/sharer.php?app_id=1223420154469580&sdk=joey&u="+window.location.href),$("#sharegoogle").attr("href","https://plus.google.com/share?url="+window.location.href),$("#sharetwitter").attr("href","https://twitter.com/home?status="+window.location.href),coutFacebook(),coutGoogle(),coutTwitter()}),$("#sharefacebook").click(function(){coutFacebook()}),$("#sharegoogle").click(function(){coutGoogle()}),$("#sharetwitter").click(function(){coutTwitter()});