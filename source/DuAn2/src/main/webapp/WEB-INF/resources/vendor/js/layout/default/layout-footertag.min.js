function recaptchaCallback(){$("#btn-forgot").removeAttr("disabled")}function login(){clearTimeout(timeout),timeout=setTimeout(function(){var e=$("#login-form").serialize(),t=$("meta[name='_csrf']").attr("content"),r=$("meta[name='_csrf_header']").attr("content");$(document).ajaxSend(function(e,o){o.setRequestHeader(r,t)}),$.ajax({type:"POST",url:contextPath+"/login",data:e,success:function(e){$("#LoadingImage").hide(),"Bad credentials"==e?$("#msgerror").text("* Sai Tên Đăng Nhập Hoặc Mật Khẩu"):"User account is locked"==e?$("#msgerror").text("* Tài Khoản Đã Bị Khóa"):"success"==e&&($("#msgerror").text(""),location.reload())},error:function(){$("#LoadingImage").hide()}})},100)}function register(){clearTimeout(timeout),timeout=setTimeout(function(){var e={};e.userName=$("#userNamer").val().trim(),e.email=$("#emailr").val().trim(),e.password=$("#rppasswordr").val().trim();var t=$("meta[name='_csrf']").attr("content"),r=$("meta[name='_csrf_header']").attr("content");$(document).ajaxSend(function(e,o){o.setRequestHeader(r,t)}),$.ajax({type:"POST",contentType:"application/json",url:contextPath+"/register",data:JSON.stringify(e),success:function(e){$("#LoadingImage").hide(),console.log(e),"errorUserNameAndEmail"==e?($("#userNamer").focus(),$("#msgerror-r").text("* Tên Đăng Nhập Và Email Đã Tồn Tại")):"errorUserName"==e?($("#userNamer").focus(),$("#msgerror-r").text("* Tên Đăng Nhập Đã Tồn Tại")):"errorEmail"==e?($("#emailr").focus(),$("#msgerror-r").text("* Email Đã Tồn Tại")):"error"==e?$("#msgerror-r").text("* Đăng Ký Thất Bại"):location.reload()},error:function(){$("#LoadingImage").hide()}})},100)}function forgotpassword(){clearTimeout(timeout),timeout=setTimeout(function(){var e=$("#userNamef").val().trim(),t=$("meta[name='_csrf']").attr("content"),r=$("meta[name='_csrf_header']").attr("content");$(document).ajaxSend(function(e,o){o.setRequestHeader(r,t)}),$.ajax({type:"POST",contentType:"application/json",url:contextPath+"/user/forgotpassword",data:e,success:function(e){grecaptcha.reset(),"error"==e?$("#msgerror-f").text("* Tài Khoản Không Tồn Tại"):$("#msgerror-f").text(e);var t=grecaptcha.getResponse();0==t.length&&$("#btn-forgot").attr("disabled","disabled"),$("#LoadingImage").hide()},error:function(){$("#LoadingImage").hide()}})},100)}function checklogin(){var e=$("#userName").val().trim(),t=$("#password").val().trim();""==e&&""==t?$("#msgerror").text("* Vui Lòng Nhập Đủ Thông Tin"):""==e?$("#msgerror").text("* Vui Lòng Nhập UserName"):""==t?$("#msgerror").text("* Vui Lòng Nhập Mật Khẩu"):($("#LoadingImage").show(),$("#msgerror").text(""),login())}function checkregister(){var e=$("#userNamer").val().trim(),t=$("#emailr").val().trim(),r=$("#passwordr").val().trim(),o=$("#rppasswordr").val().trim(),n=/[A-Z0-9._%+-]+@[A-Z0-9-]+.+.[A-Z]{2,4}/gim,i=/^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{6,16}$/;return console.log(t),""==e?($("#msgerror-r").text("* Vui Lòng Nhập UserName"),!1):e.length<6||e.length>16?($("#msgerror-r").text("* Tên Đăng Nhập Từ 6 - 16 Ký Tự"),!1):""==t?($("#msgerror-r").text("* Vui Lòng Nhập Email"),!1):t.match(n)?""==r?($("#msgerror-r").text("* Vui Lòng Nhập Mật Khẩu"),!1):r.match(i)?""==o?($("#msgerror-r").text("* Vui Lòng Nhập Nhập Lại Mật Khẩu"),!1):o!=r?($("#msgerror-r").text("* Nhập Lại Mật Khẩu Không Khớp"),!1):($("#btn-register").prop("disabled",!1),$("#msgerror-r").text(""),!0):($("#msgerror-r").text("* Mật Khẩu Từ 6 -16 Ký Tự Bao Gồm Chữ, Số Và Ký Tự Đặc Biệt"),!1):($("#msgerror-r").text("* Vui Lòng Nhập Đúng Email"),!1)}function checkforgot(){var e=$("#userNamef").val().trim(),t=grecaptcha.getResponse();""==e?$("#msgerror-f").text("* Vui Lòng Nhập Tên Tài Khoản"):0==t.length?document.getElementById("msgerror-f").innerHTML="* Vui Lòng Xác Nhập Captcha":($("#LoadingImage").show(),forgotpassword())}function checkupdateforgotpassword(){var e=$("#passwordfg").val().trim(),t=$("#rppasswordfg").val().trim(),r=/^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{6,16}$/;""==e?$("#msgerror-fp").text("* Vui Lòng Nhập Mật Khẩu Mới"):e.match(r)?""==t?$("#msgerror-fp").text("* Vui Lòng Nhập Nhập Lại Mật Khẩu Mới"):e!=t?$("#msgerror-fp").text("* Nhập Lại Mật Khẩu Không Trùng Khớp"):$("#btn-forgotpassword").attr("type","submit"):$("#msgerror-fp").text("* Mật Khẩu Từ 6 -16 Ký Tự Bao Gồm Chữ, Số Và Ký Tự Đặc Biệt")}function logoutFacebook(){FB.logout(function(){})}function attachSignin(e){auth2.attachClickHandler(e,{},function(e){var t=e.getAuthResponse().id_token,r=$("meta[name='_csrf']").attr("content"),o=$("meta[name='_csrf_header']").attr("content");$(document).ajaxSend(function(e,t){t.setRequestHeader(o,r)}),$.ajax({type:"POST",contentType:"application/json",url:contextPath+"/signin-google",data:t,success:function(){$("#LoadingImage").hide(),location.reload()},error:function(){}})},function(){})}function signOut(){firstLogin=0;var e=gapi.auth2.getAuthInstance();e.signOut().then(function(){})}if(jQuery(function(e){e(".rvs-container").rvslider()}),jQuery(".widget-tabbed > h3 span",".sidebar").on("click",function(){var e=jQuery(this);return e.addClass("active").siblings(".active").removeClass("active").parent().siblings("div").eq(e.index()).addClass("active").siblings(".active").removeClass("active"),!1}),$("#back-to-top").length){var scrollTrigger=100,backToTop=function(){var e=$(window).scrollTop();e>scrollTrigger?$("#back-to-top").addClass("show"):$("#back-to-top").removeClass("show")};backToTop(),$(window).on("scroll",function(){backToTop()}),$("#back-to-top").on("click",function(e){e.preventDefault(),$("html,body").animate({scrollTop:0},700)})}!function(){var e=document.getElementById("morphsearch"),t=e.querySelector("input.morphsearch-input"),r=e.querySelector("span.morphsearch-close"),o=isAnimating=!1,n=function(r){if("focus"===r.type.toLowerCase()&&o)return!1;morphsearch.getBoundingClientRect();o?($("#morphsearch").removeAttr("style"),classie.remove(e,"open"),""!==t.value&&setTimeout(function(){classie.add(e,"hideInput"),setTimeout(function(){classie.remove(e,"hideInput"),t.value=""},300)},500),t.blur()):($("#morphsearch").css("position","fixed"),classie.add(e,"open")),o=!o};t.addEventListener("focus",n),r.addEventListener("click",n),document.addEventListener("keydown",function(e){var t=e.keyCode||e.which;27===t&&o&&n(e)}),e.querySelector('button[type="submit"]').addEventListener("click",function(e){e.preventDefault()})}(),$("#inputsearch").keypress(function(e){return 13==e.which?($("#formsearch").submit(),!1):void 0}),$("#btnsearch").click(function(){return $("#formsearch").submit(),!1}),$(".modal_trigger").leanModal({top:100,overlay:.6,closeButton:".modal_close"}),$(".modal_trigger").click(function(){$(".user_forgot").hide(),$(".user_login").hide(),$(".user_register").hide(),$(".social_login").show()}),$(function(){$("#login_form").click(function(){return $(".social_login").hide(),$(".user_login").show(),!1}),$("#register_form").click(function(){return $(".social_login").hide(),$(".user_register").show(),$(".header_title").text("Đăng Ký"),!1}),$("#forgot_password").click(function(){return $(".social_login").hide(),$(".user_login").hide(),$(".user_register").hide(),$(".user_forgot").show(),$(".header_title").text("Lấy Lại Mật Khẩu"),!1}),$(".back_btn").click(function(){return $(".user_login").hide(),$(".user_register").hide(),$(".user_forgot").hide(),$(".social_login").show(),$(".header_title").text("Đăng Nhập"),!1})});var timeout=null;$("#password").keypress(function(e){13!=e.keyCode&&13!=e.which||checklogin()}),$("#btn-login").click(function(){checklogin()}),$("#rppasswordr").keypress(function(e){13!=e.keyCode&&13!=e.which||checkregister()&&($("#LoadingImage").show(),register())}),$("#btn-register").click(function(){checkregister()&&($("#LoadingImage").show(),register())}),$("#register-form").on("keyup keydown",function(){checkregister()}),$("#btn-forgot").click(function(){checkforgot()}),$("#userNamef").keypress(function(e){13!=e.keyCode&&13!=e.which||(checkforgot(),e.preventDefault())}),$("#rppasswordfg").keypress(function(e){13!=e.keyCode&&13!=e.which||checkupdateforgotpassword()}),$("#btn-forgotpassword").click(function(){checkupdateforgotpassword()}),window.fbAsyncInit=function(){FB.init({appId:"1223420154469580",xfbml:!0,version:"v2.11"}),FB.getLoginStatus(function(e){"connected"===e.status||"not_authorized"===e.status})},function(e,t,r){var o,n=e.getElementsByTagName(t)[0];e.getElementById(r)||(o=e.createElement(t),o.id=r,o.src="//connect.facebook.com/en_US/sdk.js",n.parentNode.insertBefore(o,n))}(document,"script","facebook-jssdk"),document.getElementById("btn-facebook").addEventListener("click",function(){FB.login(function(e){if(e.authResponse){var t=e.authResponse.accessToken,r=$("meta[name='_csrf']").attr("content"),o=$("meta[name='_csrf_header']").attr("content");$(document).ajaxSend(function(e,t){t.setRequestHeader(o,r)}),$.ajax({type:"POST",contentType:"application/json",url:contextPath+"/signin-facebook",data:t,success:function(e){"success"==e&&location.reload()},error:function(){}})}},{scope:"email,public_profile",return_scopes:!0})},!1);var googleUser={},startApp=function(){gapi.load("auth2",function(){auth2=gapi.auth2.init({client_id:"957067339527-2a7jir87qgufa498et556ke87d8lv5sb.apps.googleusercontent.com",cookiepolicy:"single_host_origin"}),attachSignin(document.getElementById("btn-google"))})};startApp(),$("#btn-logout").click(function(){clearTimeout(timeout),timeout=setTimeout(function(){var e=$("meta[name='_csrf']").attr("content"),t=$("meta[name='_csrf_header']").attr("content");$(document).ajaxSend(function(r,o){o.setRequestHeader(t,e)}),$.ajax({type:"POST",url:contextPath+"/logout",success:function(e){$("#LoadingImage").hide(),"success"==e&&(signOut(),logoutFacebook(),location.reload())},error:function(){$("#LoadingImage").hide(),location.reload()}})},10)});